<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 5. Strictness and laziness | Functional Programming in TypeScript</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/fp_book_club_ts/assets/css/0.styles.fa19ed37.css" as="style"><link rel="preload" href="/fp_book_club_ts/assets/js/app.6ae94638.js" as="script"><link rel="preload" href="/fp_book_club_ts/assets/js/8.a9c5cee6.js" as="script"><link rel="prefetch" href="/fp_book_club_ts/assets/js/2.30eef2e3.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/3.e009d214.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/4.9c6222f2.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/5.07927b69.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/6.1e8e7f40.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/7.405d51bc.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/9.88fcb229.js">
    <link rel="stylesheet" href="/fp_book_club_ts/assets/css/0.styles.fa19ed37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fp_book_club_ts/" class="home-link router-link-active"><!----> <span class="site-name">Functional Programming in TypeScript</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_4.html" class="nav-link">Chapter 4</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_5.html" class="nav-link router-link-exact-active router-link-active">Chapter 5</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_4.html" class="nav-link">Chapter 4</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_5.html" class="nav-link router-link-exact-active router-link-active">Chapter 5</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fp_book_club_ts/chapter_1.html" class="sidebar-link">Chapter 1. What is functional programming?</a></li><li><a href="/fp_book_club_ts/chapter_2.html" class="sidebar-link">Chapter 2. Getting started with functional programming in TypeScript</a></li><li><a href="/fp_book_club_ts/chapter_3.html" class="sidebar-link">Chapter 3. Functional data structures</a></li><li><a href="/fp_book_club_ts/chapter_4.html" class="sidebar-link">Chapter 4. Handling errors without exceptions</a></li><li><a href="/fp_book_club_ts/chapter_5.html" class="active sidebar-link">Chapter 5. Strictness and laziness</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_5.html#strict-and-non-strict-functions" class="sidebar-link">Strict and non-strict functions</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="chapter-5-strictness-and-laziness"><a href="#chapter-5-strictness-and-laziness" aria-hidden="true" class="header-anchor">#</a> Chapter 5. Strictness and laziness</h1> <p>Recall <code>List</code> operations from <a href="/fp_book_club_ts/chapter_3.html">Chapter 3</a>: <code>map</code>, <code>filter</code>, <code>foldLeft</code>, <code>foldRight</code>, <code>zipWith</code>, etc.
Each one passes over the whole input list and outputs a freshly-created list. For example, each transformation in the
following code produces a new list, and each of these lists (except the last one) is discarded almost immediately after
being created.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">&gt;</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">List</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p> <p>&quot;Whoa, wait a minute,&quot; you might be thinking. &quot;Our <code>List</code> commands did not look like this, and did not produce nice,
clean console output like this.&quot; That's true, because we wrote all our <code>List</code> functions at the top level of the module,
rather than defining them on a parent class like we did for <code>Option</code> and <code>Either</code>. We're going to use <code>List</code> a lot, so
as an exercise, you might want to go back and update the code to enable the more object-oriented syntax. Hint: You can
do this without deleting any of the existing <code>List</code> functions!</p> <p>The nice output comes from the <a href="https://nodejs.org/dist/latest-v10.x/docs/api/util.html#util_custom_inspection_functions_on_objects" title="Util | Node.js Documentaiton" target="_blank" rel="noopener noreferrer">custom inspection function<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> capability supported by Node. Check out the
<code>List</code> source in the online repository for details.</p></div> <p>We'd like to fuse these operations together into a single pass and avoid creating the intermediate temporary data
structures. We could accomplish this by writing a one-off <code>while</code> loop, but that wouldn't be reusable. It would be
better if we could have this done automatically while retaining the same high-level, composable style we've been
developing.</p> <p>We can achieve this automatic loop fusion through the use of <em>non-strictness</em>, also called <em>laziness</em>. In this chapter,
we'll work through the construction of a lazy list type that fuses transformations, and see how non-strictness is a
fundamental technique for writing more efficient and modular functional programs in general.</p> <h2 id="strict-and-non-strict-functions"><a href="#strict-and-non-strict-functions" aria-hidden="true" class="header-anchor">#</a> Strict and non-strict functions</h2> <p>Non-strictness is a property of a function that means the function may choose not to evaluate some or all of its
arguments. Strict functions, as you may guess, always evaluate their arguments. Although you may not have heard about
function strictness, you are probably already familiar with the behavior. In certain cases, we call it
<em>short-circuiting</em>. Many languages, including TypeScript, have the short-circuiting boolean operators <code>&amp;&amp;</code> and <code>||</code>. The
operator <code>&amp;&amp;</code> only evaluates its second argument if its first is <code>true</code>, while <code>||</code> only evaluates its second argument
if its first is <code>false</code>.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">&gt;</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hey!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// doesn't print anything</span>
<span class="token boolean">false</span>

<span class="token operator">&gt;</span> <span class="token boolean">true</span> <span class="token operator">||</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hey!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// doesn't print anything, either</span>
<span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The <code>if-else</code> construct in TypeScript is also non-strict. The <code>else</code> block is only evaluated when the condition in the
<code>if</code> block is false, and the <code>if</code> block only when the condition is true.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Goodbye&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Hello
undefined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/2/2019, 6:16:24 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fp_book_club_ts/chapter_4.html" class="prev">
          Chapter 4. Handling errors without exceptions
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/fp_book_club_ts/assets/js/8.a9c5cee6.js" defer></script><script src="/fp_book_club_ts/assets/js/app.6ae94638.js" defer></script>
  </body>
</html>
